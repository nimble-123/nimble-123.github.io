
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Default User und Swap Grösse des Raspberry Pi ändern - Just My Two Cents</title>
  <meta name="author" content="Nils Lutz">

  
  <meta name="description" content="Es regnet, schmuddel Wetter - also Raspberry Pi ausgepackt und bisschen was dran basteln. Da ich vor habe, meinen Raspi später einmal auch über das &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://nlsltz.github.io/2014/02/09/default-user-und-swap-grosse-des-raspberry-pi-andern/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Just My Two Cents" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=Arvo:400,400italic,700,700italic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=Playball" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-52478234-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
  <header role="banner"><hgroup>
  <h1><a href="/">Just My Two Cents</a></h1>
  
    <h2>Linux, Raspberry Pi, Android</h2>
  
</hgroup>

</header>
  <div id="navigation">
    <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:nlsltz.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  </div>
  <div id="body"  >
    <div id="main">
      <div id="content">
        <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Default User Und Swap Grösse Des Raspberry Pi ändern</h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-02-09T17:42:43+01:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


<div class="entry-content"><p>Es regnet, schmuddel Wetter - also Raspberry Pi ausgepackt und bisschen was dran basteln. Da ich vor habe, meinen Raspi später einmal auch über das Internet erreichbar zu machen, soll der Standard User von <code>pi</code> in einen beliebigen Namen meiner Wahl abgeändert werden. Das erschwert zum einen möglichen Angreifern den Zugang, da sie zusätzlich zum Passwort auch noch den User ermitteln müssten, und zum anderen mag ich es einfach lieber wenn auf all meinen Geräten mein User den selben Namen trägt. Außerdem habe ich mir gedacht, wenn ich schon mal dabei bin erhöhe ich doch direkt die Swap Grösse, welche in der Standard Konfiguration vom Raspbian OS auf 100 MByte gesetzt wird. So am Rande, die <a href="https://wiki.debian.org/Swap">Swap Datei</a> - unter Windows auch gerne Auslagerungsdatei genannt - ist eine Art virtueller Arbeitsspeicher zusätzlich zum schon vorhandenen physischen Arbeitspeicher. Später soll mein Raspi einen Webserver inklusive einer Datenbank, ein kleines Wiki und vermutlich eine private Dropbox alternative beherbergen. Damit diese Services den Kleinen nicht direkt in Knie zwingen, die Erhöhung der Swap Datei.<!-- more --></p>

<p>So kommen wir zum eingemachten. Starten werde ich mit dem Ändern des Default User. Wir benötigen einen extra User kurzzeitig, von welchem aus wir dann den eigentlichen User bearbeiten werden. Für diesen User soll auch kein extra <code>/home/</code> Verzeichnis angelegt werden, da unnötig.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sudo adduser --no-create-home interim
</span></code></pre></td></tr></table></div></figure>


<p>
Dieser neu erstellte User wird noch in die <code>sudoers</code> Liste eingetragen, damit er sich zeitweilig Root-Rechte über das <code>sudo</code> Kommando holen darf. Anschließend kann die Liste gespeichert(Strg+O) und geschlossen(Strg+X), sowie sich komplett vom Raspi abgemeldet werden.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sudo visudo
</span></code></pre></td></tr></table></div></figure>


<p></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>interim <span class="nv">ALL</span><span class="o">=(</span>ALL<span class="o">)</span> NOPASSWD: ALL
</span></code></pre></td></tr></table></div></figure>


<p>
Jetzt meldet man sich mit dem eben erstellten <code>interim</code> User wieder an. Der <code>pi</code> User wird dann durch folgenden Befehl umbenannt. Das <code>/home/</code> Verzeichnis nehmen wir direkt mit, damit vorher dort gespeicherte Daten nicht verloren gehen. In meinem Fall soll der <code>pi</code> User in <code>ikarus</code> umbenannt werden. Jeder User hat auch noch seine eigene Gruppe mit selbem Namen, daher müssen wir diese auch mit umbenennen.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sudo usermod --move-home --login ikarus --home /home/ikarus pi
</span><span class='line'>sudo groupmod -n ikarus pi
</span></code></pre></td></tr></table></div></figure>


<p>
Ist das vollbracht löschen wir aus der <code>sudoers</code> Liste noch den vorhin eingetragenen <code>interim</code> User und natürlich ändern wir den <code>pi</code> User so ab, dass er auf den von uns gewählten neuen User passt.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sudo visudo
</span></code></pre></td></tr></table></div></figure>


<p></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>pi <span class="nv">ALL</span><span class="o">=(</span>ALL<span class="o">)</span> NOPASSWD: ALL     <span class="c">#pi ändern zu ikarus</span>
</span><span class='line'>interim <span class="nv">ALL</span><span class="o">=(</span>ALL<span class="o">)</span> NOPASSWD:ALL <span class="c">#kann wieder gelöscht werden</span>
</span></code></pre></td></tr></table></div></figure>


<p>
So noch den <code>interim</code> User und Gruppe löschen und dann sind wir damit auch fast fertig. Lediglich zwei Einträge im <code>raspi-config</code> Script und in der <code>lightDM</code> Konfiguration müssen wir noch vom <code>pi</code> User auf den Neuen ändern. Innerhalb von Nano lässt sich über <code>Strg+W</code> leicht die Textpassage suchen.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sudo deluser interim <span class="o">&amp;&amp;</span> sudo delgroup interim
</span><span class='line'>sudo sed /etc/lightdm/lightdm.conf -i -e <span class="s2">&quot;s/^#autologin-user=.*/autologin-user=ikarus/&quot;</span>
</span><span class='line'>sudo nano /usr/bin/raspi-config
</span></code></pre></td></tr></table></div></figure>


<p></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="k">if</span> id -u pi &gt; /dev/null 2&gt;<span class="p">&amp;</span>1<span class="p">;</span> <span class="k">then</span>
</span></code></pre></td></tr></table></div></figure>


<p>
zu</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="k">if</span> id -u ikarus &gt; /dev/null 2&gt;<span class="p">&amp;</span>1<span class="p">;</span> <span class="k">then</span>
</span></code></pre></td></tr></table></div></figure>


<p>
Zum Schluss noch eben das <code>raspi-config</code> Script aufgerufen und unter dem Punkt <code>Enable Boot to Desktop/Scratch</code> die Option <code>Desktop Log in as user ‘pi’ at the graphical desktop</code> bestätigen. Die <code>raspi-config</code> kann danach direkt erneut aufgerufen werden um den Boot zur Konsole wieder einzustellen. Ein Reboot besiegelt das ganze.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sudo raspi-config
</span><span class='line'>sudo reboot
</span></code></pre></td></tr></table></div></figure>


<p>
Um die Swap Grösse zu ändern reichen 5 einfache Shell Kommandos aus. Beginnen wir damit uns als Root User anzumelden, gefolgt von der Angabe der Grösse, des neuen Swap, und dem generieren dieser Swap Datei. Als Faustregel gilt <strong>SWAP = Arbeitspeicher * 2</strong>, demnach stelle ich für meinen Raspi eine Swap Grösse von 1024 MByte ein.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sudo <span class="nb">echo</span> <span class="s2">&quot;CONF_SWAPSIZE=1024&quot;</span> &gt; /etc/dphys-swapfile
</span><span class='line'>sudo dphys-swapfile setup
</span></code></pre></td></tr></table></div></figure>


<p>
Die Swap Datei wurde generiert und wird mit folgendem Kommando noch aktiviert. Danach kann man sich als Root User wieder abmelden.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sudo dphys-swapfile swapon
</span><span class='line'><span class="nb">exit</span>
</span></code></pre></td></tr></table></div></figure>


<p>
Tadaaa, wir haben unserem Raspi einen neuen Usernamen verpasst und seinen Swap erhöht.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Nils Lutz</span></span>

      








  


<time datetime="2014-02-09T17:42:43+01:00" pubdate data-updated="true"></time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/raspberrypi/'>raspberrypi</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://nlsltz.github.io/2014/02/09/default-user-und-swap-grosse-des-raspberry-pi-andern/" data-via="" data-counturl="http://nlsltz.github.io/2014/02/09/default-user-und-swap-grosse-des-raspberry-pi-andern/" >Tweet</a>
  
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/2014/02/07/hello-world/" title="Previous Post: Hello World!">&laquo; Hello World!</a>
      
      
        <a class="basic-alignment right" href="/2014/02/16/plex-media-server-einrichten/" title="Next Post: Plex Media Server einrichten">Plex Media Server einrichten &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2014/10/21/openvpn-auf-dem-raspberry-pi-einrichten/">OpenVPN auf dem RaspberryPi einrichten</a>
      </li>
    
      <li class="post">
        <a href="/2014/09/04/umstieg-von-wordpress-auf-octopress/">Umstieg von Wordpress auf Octopress</a>
      </li>
    
      <li class="post">
        <a href="/2014/02/16/plex-media-server-einrichten/">Plex Media Server einrichten</a>
      </li>
    
      <li class="post">
        <a href="/2014/02/09/default-user-und-swap-grosse-des-raspberry-pi-andern/">Default User und Swap Grösse des Raspberry Pi ändern</a>
      </li>
    
      <li class="post">
        <a href="/2014/02/07/hello-world/">Hello World!</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/nlsltz">@nlsltz</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'nlsltz',
            count: 0,
            skip_forks: false,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>


      </div>
    </div>
    <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Nils Lutz -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a>. Design by <a href="http://octopressthemes.com">Octopress Themes</a></span>
</p>

</footer>
    



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





  </div>
</body>
</html>
